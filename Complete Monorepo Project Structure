aais/
├─ README.md
├─ LICENSE
├─ package.json
├─ pnpm-workspace.yaml
├─ turbo.json
├─ .gitignore
├─ .editorconfig
├─ .npmrc
├─ .env.example
├─ .env.local.example
├─ .prettierrc
├─ .prettierignore
├─ .eslintrc.cjs
├─ tsconfig.base.json
├─ commitlint.config.cjs
│
├─ apps/
│  ├─ web/                                  # Next.js 14 Admin + Wizard UI
│  │  ├─ package.json
│  │  ├─ next.config.js
│  │  ├─ middleware.ts
│  │  ├─ Dockerfile
│  │  ├─ scripts/
│  │  │  └─ seed-dev.ts
│  │  ├─ tests/
│  │  │  ├─ e2e/                            # Playwright
│  │  │  └─ unit/                           # Vitest/Jest
│  │  └─ src/
│  │     ├─ app/
│  │     │  ├─ (auth)/
│  │     │  │  ├─ login/
│  │     │  │  │  └─ page.tsx
│  │     │  │  └─ reset/
│  │     │  │     └─ page.tsx
│  │     │  ├─ (dashboard)/
│  │     │  │  ├─ layout.tsx
│  │     │  │  ├─ page.tsx                  # Command Center
│  │     │  │  ├─ orchestrator/
│  │     │  │  │  └─ page.tsx               # AI Orchestrator
│  │     │  │  ├─ campaigns/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ leads/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ bookings/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ payments/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ whatsapp/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ reviews/
│  │     │  │  │  └─ page.tsx
│  │     │  │  ├─ analytics/
│  │     │  │  │  └─ page.tsx
│  │     │  │  └─ settings/
│  │     │  │     └─ page.tsx
│  │     │  └─ api/
│  │     │     └─ health/
│  │     │        └─ route.ts               # UI health check only
│  │     ├─ components/
│  │     │  ├─ ui/                          # shadcn/ui components
│  │     │  ├─ charts/
│  │     │  ├─ tables/
│  │     │  ├─ cards/
│  │     │  ├─ forms/
│  │     │  ├─ orchestration/
│  │     │  ├─ whatsapp/
│  │     │  ├─ crm/
│  │     │  ├─ booking/
│  │     │  ├─ payments/
│  │     │  └─ reviews/
│  │     ├─ lib/
│  │     │  ├─ api-client.ts                # typed API client
│  │     │  ├─ auth.ts
│  │     │  ├─ rbac.ts
│  │     │  ├─ analytics.ts
│  │     │  ├─ constants.ts
│  │     │  └─ validators.ts                # zod schemas (UI side)
│  │     ├─ styles/
│  │     │  └─ globals.css
│  │     └─ public/
│  │        ├─ icons/
│  │        └─ brand/
│  │
│  ├─ api/                                  # Core backend (NestJS or Fastify)
│  │  ├─ package.json
│  │  ├─ Dockerfile
│  │  ├─ scripts/
│  │  │  ├─ dev-seed.ts
│  │  │  └─ create-indexes.ts
│  │  ├─ test/
│  │  │  ├─ integration/
│  │  │  └─ unit/
│  │  └─ src/
│  │     ├─ main.ts
│  │     ├─ app.module.ts
│  │     ├─ config/
│  │     │  ├─ env.ts
│  │     │  ├─ logger.ts
│  │     │  ├─ rate-limit.ts
│  │     │  ├─ cors.ts
│  │     │  └─ swagger.ts                   # OpenAPI
│  │     ├─ common/
│  │     │  ├─ errors/
│  │     │  ├─ guards/
│  │     │  ├─ interceptors/
│  │     │  ├─ pipes/
│  │     │  ├─ decorators/
│  │     │  ├─ utils/
│  │     │  ├─ types/
│  │     │  └─ index.ts
│  │     ├─ modules/
│  │     │  ├─ auth/
│  │     │  │  ├─ auth.module.ts
│  │     │  │  ├─ auth.controller.ts
│  │     │  │  ├─ auth.service.ts
│  │     │  │  ├─ strategies/
│  │     │  │  │  ├─ jwt.strategy.ts
│  │     │  │  │  └─ refresh.strategy.ts
│  │     │  │  ├─ dto/
│  │     │  │  └─ policies/
│  │     │  ├─ orgs/
│  │     │  ├─ users/
│  │     │  ├─ rbac/
│  │     │  ├─ offers/
│  │     │  │  ├─ offers.controller.ts
│  │     │  │  ├─ offers.service.ts
│  │     │  │  ├─ dto/
│  │     │  │  └─ validators/
│  │     │  ├─ assets/
│  │     │  │  ├─ assets.controller.ts      # upload + store in R2/S3
│  │     │  │  └─ assets.service.ts
│  │     │  ├─ events/
│  │     │  │  ├─ events.controller.ts      # server truth event ingestion
│  │     │  │  └─ events.service.ts
│  │     │  ├─ attribution/
│  │     │  │  └─ attribution.service.ts    # UTMs + clickIds reconciliation
│  │     │  ├─ campaigns/
│  │     │  │  ├─ campaigns.controller.ts
│  │     │  │  └─ campaigns.service.ts
│  │     │  ├─ orchestrator/
│  │     │  │  ├─ orchestrator.controller.ts
│  │     │  │  └─ orchestrator.service.ts
│  │     │  ├─ connectors/
│  │     │  │  ├─ meta/
│  │     │  │  ├─ google/
│  │     │  │  └─ tiktok/
│  │     │  ├─ crm/
│  │     │  │  ├─ leads.controller.ts
│  │     │  │  ├─ leads.service.ts
│  │     │  │  └─ stages.ts
│  │     │  ├─ whatsapp/
│  │     │  │  ├─ whatsapp.controller.ts    # provider webhooks
│  │     │  │  ├─ whatsapp.service.ts       # state machine
│  │     │  │  └─ flows/
│  │     │  │     ├─ booking.flow.ts
│  │     │  │     ├─ deposit.flow.ts
│  │     │  │     ├─ followup.flow.ts
│  │     │  │     ├─ review.flow.ts
│  │     │  │     └─ broadcast.flow.ts
│  │     │  ├─ booking/
│  │     │  │  ├─ booking.controller.ts
│  │     │  │  ├─ booking.service.ts
│  │     │  │  └─ availability/
│  │     │  │     ├─ calendar.provider.ts   # Google Calendar integration
│  │     │  │     └─ resources.ts
│  │     │  ├─ payments/
│  │     │  │  ├─ payments.controller.ts
│  │     │  │  ├─ payments.service.ts
│  │     │  │  ├─ providers/
│  │     │  │  │  ├─ mpesa-daraja/
│  │     │  │  │  │  ├─ daraja.client.ts
│  │     │  │  │  │  └─ daraja.webhook.ts
│  │     │  │  │  ├─ paystack/
│  │     │  │  │  └─ stripe/
│  │     │  │  └─ idempotency/
│  │     │  ├─ reviews/
│  │     │  │  ├─ reviews.controller.ts
│  │     │  │  └─ reviews.service.ts        # GBP link + routing
│  │     │  ├─ seo/
│  │     │  │  └─ gbp.service.ts            # Google Business Profile tasks
│  │     │  ├─ analytics/
│  │     │  │  ├─ analytics.controller.ts
│  │     │  │  └─ analytics.service.ts      # aggregates for dashboards
│  │     │  └─ admin/
│  │     │     ├─ admin.controller.ts
│  │     │     └─ audit.service.ts
│  │     ├─ db/
│  │     │  └─ mongo/
│  │     │     ├─ client.ts                 # Atlas client + pooling
│  │     │     ├─ collections.ts            # names + typed wrappers
│  │     │     ├─ indexes.ts                # TTL + compound indexes
│  │     │     ├─ migrations/
│  │     │     └─ README.md
│  │     ├─ queue/
│  │     │  ├─ bullmq.ts
│  │     │  ├─ jobs/
│  │     │  │  ├─ pacing.job.ts
│  │     │  │  ├─ rebalance.job.ts
│  │     │  │  ├─ reminders.job.ts
│  │     │  │  ├─ broadcasts.job.ts
│  │     │  │  ├─ reports.job.ts
│  │     │  │  └─ review-nudges.job.ts
│  │     │  └─ schedulers/
│  │     │     └─ cron.ts                   # schedules -> enqueue only
│  │     ├─ webhooks/
│  │     │  ├─ verify-signature.ts
│  │     │  └─ idempotency.ts
│  │     └─ observability/
│  │        ├─ metrics.ts                   # Prometheus (optional)
│  │        └─ tracing.ts
│  │
│  ├─ worker/                               # Dedicated worker process (BullMQ)
│  │  ├─ package.json
│  │  ├─ Dockerfile
│  │  └─ src/
│  │     ├─ main.ts
│  │     ├─ config/
│  │     ├─ jobs/
│  │     │  ├─ ad/
│  │     │  │  ├─ fetch-platform-metrics.ts
│  │     │  │  ├─ anomaly-check.ts
│  │     │  │  ├─ fatigue-check.ts
│  │     │  │  ├─ budget-rebalance.ts
│  │     │  │  └─ auto-pause.ts
│  │     │  ├─ crm/
│  │     │  │  ├─ lead-scoring.ts
│  │     │  │  └─ followup-scheduler.ts
│  │     │  ├─ booking/
│  │     │  │  ├─ reminder-dispatch.ts
│  │     │  │  └─ no-show-flow.ts
│  │     │  ├─ payments/
│  │     │  │  ├─ reconcile-mpesa.ts
│  │     │  │  └─ refund-dispatch.ts
│  │     │  ├─ reviews/
│  │     │  │  ├─ request-reviews.ts
│  │     │  │  └─ route-negative-feedback.ts
│  │     │  ├─ seo/
│  │     │  │  ├─ gbp-post-scheduler.ts
│  │     │  │  └─ gbp-photo-uploader.ts
│  │     │  └─ reporting/
│  │     │     ├─ daily-summary.ts
│  │     │     └─ weekly-owner-report.ts
│  │     └─ queues/
│  │        └─ index.ts
│  │
│  ├─ mobile/                               # React Native (Expo) client
│  │  ├─ package.json
│  │  ├─ app.json
│  │  ├─ expo-env.d.ts
│  │  ├─ eas.json
│  │  ├─ scripts/
│  │  └─ src/
│  │     ├─ app/
│  │     │  ├─ (auth)/
│  │     │  │  ├─ login.tsx
│  │     │  │  └─ otp.tsx
│  │     │  └─ (main)/
│  │     │     ├─ index.tsx                 # mini command center
│  │     │     ├─ leads.tsx
│  │     │     ├─ bookings.tsx
│  │     │     ├─ messages.tsx              # WhatsApp-like inbox view (internal)
│  │     │     ├─ analytics.tsx
│  │     │     └─ settings.tsx
│  │     ├─ components/
│  │     │  ├─ ui/
│  │     │  ├─ cards/
│  │     │  └─ lists/
│  │     ├─ lib/
│  │     │  ├─ api.ts                       # typed API client
│  │     │  ├─ auth.ts
│  │     │  ├─ storage.ts
│  │     │  └─ validators.ts
│  │     └─ assets/
│  │        ├─ icons/
│  │        └─ splash/
│  │
│  └─ landing/                              # Optional marketing site (public)
│     ├─ package.json
│     ├─ Dockerfile
│     └─ src/
│        └─ app/
│           ├─ page.tsx                     # "Run Ads Like A Pro"
│           ├─ pricing/
│           │  └─ page.tsx
│           ├─ industries/
│           │  └─ page.tsx
│           ├─ case-studies/
│           │  └─ page.tsx
│           ├─ demo/
│           │  └─ page.tsx
│           ├─ docs/
│           │  └─ page.tsx
│           └─ layout.tsx
│
├─ packages/
│  ├─ shared/                               # shared types + zod + constants
│  │  ├─ package.json
│  │  ├─ tsconfig.json
│  │  └─ src/
│  │     ├─ types/
│  │     │  ├─ org.ts
│  │     │  ├─ user.ts
│  │     │  ├─ offer.ts
│  │     │  ├─ campaign.ts
│  │     │  ├─ lead.ts
│  │     │  ├─ booking.ts
│  │     │  ├─ payment.ts
│  │     │  ├─ whatsapp.ts
│  │     │  └─ analytics.ts
│  │     ├─ zod/
│  │     │  ├─ offer.schema.ts
│  │     │  ├─ campaign.schema.ts
│  │     │  ├─ lead.schema.ts
│  │     │  ├─ booking.schema.ts
│  │     │  └─ payment.schema.ts
│  │     ├─ constants/
│  │     │  ├─ stages.ts
│  │     │  ├─ platforms.ts
│  │     │  └─ objectives.ts
│  │     └─ utils/
│  │        ├─ money.ts
│  │        ├─ dates.ts
│  │        ├─ ids.ts
│  │        └─ crypto.ts                    # hashing + signatures
│  │
│  ├─ decision-engine/                      # deterministic decisions + stats
│  │  ├─ package.json
│  │  ├─ tsconfig.json
│  │  └─ src/
│  │     ├─ profit/
│  │     │  ├─ margin.ts                    # contribution margin, max CPA
│  │     │  └─ constraints.ts               # capacity-aware rules
│  │     ├─ experiments/
│  │     │  ├─ ab/
│  │     │  │  ├─ bayesian.ts
│  │     │  │  ├─ sequential.ts
│  │     │  │  └─ stopping.ts
│  │     │  └─ abc/
│  │     │     └─ variation-builder.ts      # A/B/C definition
│  │     ├─ allocation/
│  │     │  ├─ budget-split.ts              # pacing + constraints optimizer
│  │     │  └─ cross-platform.ts
│  │     ├─ detection/
│  │     │  ├─ anomalies.ts                 # EWMA/zscore
│  │     │  └─ fatigue.ts                   # CTR+freq+CPA logic
│  │     ├─ forecasting/
│  │     │  └─ short-horizon.ts             # simple models first
│  │     └─ explain/
│  │        └─ why.ts                       # evidence output
│  │
│  ├─ connectors/                           # platform SDK wrappers
│  │  ├─ package.json
│  │  ├─ tsconfig.json
│  │  └─ src/
│  │     ├─ meta/
│  │     │  ├─ api.ts                       # create campaign/adset/ad
│  │     │  ├─ capi.ts                      # server events
│  │     │  └─ insights.ts
│  │     ├─ google/
│  │     │  ├─ ads.ts
│  │     │  ├─ enhanced-conversions.ts
│  │     │  └─ insights.ts
│  │     ├─ tiktok/
│  │     │  ├─ ads.ts
│  │     │  ├─ events.ts
│  │     │  └─ insights.ts
│  │     ├─ whatsapp/
│  │     │  ├─ providers/
│  │     │  │  ├─ meta-cloud.ts
│  │     │  │  ├─ twilio.ts
│  │     │  │  ├─ infobip.ts
│  │     │  │  └─ africastalking.ts
│  │     │  └─ templates/
│  │     └─ mpesa/
│  │        └─ daraja.ts                    # STK, C2B/B2C, helpers
│  │
│  ├─ ui/                                   # shared UI kit (web + mobile where possible)
│  │  ├─ package.json
│  │  ├─ tsconfig.json
│  │  └─ src/
│  │     ├─ theme/
│  │     ├─ components/
│  │     └─ icons/
│  │
│  └─ config/                               # shared lint/build configs
│     ├─ package.json
│     ├─ eslint/
│     ├─ tsconfig/
│     └─ prettier/
│
├─ infra/
│  ├─ docker/
│  │  ├─ docker-compose.yml                 # local + single VPS mode
│  │  ├─ Caddyfile                          # reverse proxy + TLS
│  │  ├─ mongo-init/                        # optional local only (Atlas in prod)
│  │  ├─ redis/
│  │  └─ volumes/
│  ├─ k8s/                                  # optional later
│  │  ├─ api.yaml
│  │  ├─ worker.yaml
│  │  ├─ web.yaml
│  │  └─ ingress.yaml
│  └─ scripts/
│     ├─ backup-mongo-atlas.sh              # Atlas policy + export safety
│     ├─ restore.sh
│     ├─ deploy-vps.sh
│     └─ healthcheck.sh
│
├─ docs/
│  ├─ architecture/
│  │  ├─ overview.md
│  │  ├─ data-flow.md
│  │  ├─ decision-engine.md
│  │  ├─ security.md
│  │  └─ rbac.md
│  ├─ runbooks/
│  │  ├─ webhook-debugging.md
│  │  ├─ mpesa-daraja.md
│  │  ├─ meta-capi.md
│  │  ├─ google-enhanced-conversions.md
│  │  ├─ whatsapp-providers.md
│  │  └─ incident-response.md
│  ├─ api/
│  │  └─ openapi.json                       # generated
│  └─ product/
│     ├─ kpis.md
│     ├─ slas.md
│     └─ cost-ceilings.md
│
└─ .github/
   └─ workflows/
      ├─ ci.yml
      ├─ test.yml
      ├─ docker-build.yml
      └─ deploy.yml
